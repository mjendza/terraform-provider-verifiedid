---
page_title: "msgraph_resource_action Resource - terraform-provider-msgraph"
subcategory: ""
description: |-
  This resource can perform any Microsoft Graph API action. Use this for operations like password resets, sending emails, or other one-time actions.
---

# msgraph_resource_action (Resource)

This resource can perform any Microsoft Graph API action. Use this for operations like password resets, sending emails, or other one-time actions.

## Example Usage

 ```terraform
 terraform {
   required_providers {
     msgraph = {
       source = "Microsoft/msgraph"
     }
   }
 }
 
 provider "msgraph" {}
 
 # Example 1: Send a welcome email to a user
 resource "msgraph_resource_action" "send_welcome_email" {
   resource_url = "users/john@example.com"
   action       = "sendMail"
   method       = "POST"
 
   body = {
     message = {
       subject = "Welcome to the organization!"
       body = {
         contentType = "HTML"
         content     = "<h1>Welcome!</h1><p>We're excited to have you join our team.</p>"
       }
       toRecipients = [
         {
           emailAddress = {
             address = "john@example.com"
             name    = "John Doe"
           }
         }
       ]
     }
     saveToSentItems = true
   }
 }
 
 # Example 2: Reset a user's password
 resource "msgraph_resource_action" "reset_user_password" {
   resource_url = "users/jane@example.com"
   action       = "changePassword"
   method       = "POST"
 
   body = {
     currentPassword = "OldPassword123!"
     newPassword     = "NewSecurePassword456!"
   }
 }
 
 # Example 3: Send a custom notification with specific headers
 resource "msgraph_resource_action" "send_notification" {
   resource_url = "communications/calls"
   action       = "logTeleconferenceDeviceQuality"
   method       = "POST"
 
   headers = {
     "ConsistencyLevel" = "eventual"
     "X-AnchorMailbox"  = "john@example.com"
   }
 
   body = {
     quality = {
       timestamp = "2024-01-01T00:00:00Z"
       data      = "quality-data"
     }
   }
 }
 
 resource "msgraph_resource_action" "custom_user_action" {
   resource_url = "users/john@example.com"
   action       = "customAction"
   method       = "POST"
 
   query_parameters = {
     "$select" = ["id", "displayName"]
     "force"   = ["true"]
   }
 
   headers = {
     "X-Custom-Header"  = "custom-value"
     "X-Request-Source" = "terraform"
     "Content-Language" = "en-US"
   }
 
   body = {
     actionType = "sync"
     parameters = {
       syncAll = true
     }
   }
 
   response_export_values = {
     result_id   = "id"
     status      = "status"
     all_details = "@"
   }
 
   retry = {
     error_message_regex = [
       ".*throttled.*",
       ".*rate limit.*"
     ]
   }
 }
 
 # Output the results
 output "welcome_email_sent" {
   value = msgraph_resource_action.send_welcome_email.output
 }
 
 output "notification_sent" {
   value = msgraph_resource_action.send_notification.output
 }
 
 output "custom_action_result" {
   value = msgraph_resource_action.custom_user_action.output
 }
 ```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `method` (String) The HTTP method to use for the action. Common methods include `GET`, `POST`, `PATCH`, `DELETE`, and `PUT`.
- `resource_url` (String) The URL of the resource to perform the action on. This should be the full resource path, for example `applications/12345678-1234-1234-1234-123456789abc` or `users/user@example.com`. You can use the `resource_url` output from `msgraph_resource`.

### Optional

- `action` (String) The action to perform on the resource. This is the action path that will be appended to the resource URL, for example `addPassword`, `sendMail`, `changePassword`, or `members/$ref`. Leave empty for actions directly on the resource.
- `api_version` (String) The API version of the data source. The allowed values are `v1.0` and `beta`. Defaults to `v1.0`.
- `body` (Dynamic) A dynamic attribute that contains the request body.
- `headers` (Map of String) A mapping of HTTP headers to be sent with the action request. Note that authentication headers are automatically handled.
- `query_parameters` (Map of List of String) A mapping of query parameters to be sent with the action request.
- `response_export_values` (Map of String) A map where the key is the name for the result and the value is a JMESPath query string to filter the response. Here's an example. If it sets to `{"all" = "@", "app_id" = "appId"}`, it will set the following HCL object to the computed property output.

	```text
	{
		"all" = {
			"appId" = "00000000-0000-0000-0000-000000000000"
			"displayName" = "example"
			"id" = "00000000-0000-0000-0000-000000000000"
			...
		}
		"app_id" = "00000000-0000-0000-0000-000000000000"
	}
	```

To learn more about JMESPath, visit [JMESPath](https://jmespath.org/).
- `retry` (Attributes) The retry object supports the following attributes: (see [below for nested schema](#nestedatt--retry))
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `id` (String) The ID of the resource. Normally, it is in the format of UUID.
- `output` (Dynamic) The output HCL object containing the properties specified in `response_export_values`. Here are some examples to use the values.

	```terraform
	 output "app_id" {
	   // it will output the value of app_id
	   value = msgraph_resource.application.output.app_id
	 }
	 
	 output "all" {
	   // it will output the whole response
	   value = msgraph_resource.application.output.all
	 }
	```

<a id="nestedatt--retry"></a>
### Nested Schema for `retry`

Required:

- `error_message_regex` (List of String) A list of regular expressions to match against error messages. If any of the regular expressions match, the request will be retried.


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).


